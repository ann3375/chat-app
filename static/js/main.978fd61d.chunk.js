(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},209:function(e,t,n){},210:function(e,t,n){},211:function(e,t,n){},212:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){"use strict";n.r(t);var a,r,s=n(1),c=n.n(s),i=n(42),o=n.n(i),l=n(22),u=n(10),d=n(25),f=n(7),m=n(2),j=n(4),b=n.n(j),h=(n(88),n(0)),p=function(e){var t,n=e.children,a=e.type,r=e.isDisabled,s=e.variant,c=e.className,i=e.size,o=e.path,u=e.isNavLink,d=e.onClick,f=b()("button",(t={},Object(m.a)(t,"button_size_".concat(i),i),Object(m.a)(t,"button_variant_".concat(s),s),Object(m.a)(t,"".concat(c),c),t));return u&&o?Object(h.jsx)(l.b,{className:f,to:o,children:n}):Object(h.jsx)("button",{onClick:d,type:a,disabled:r,className:f,children:n})},g=n(13),O=n(20),v=(n(94),["className","children","flex","row","align","column"]),x=function(e){var t,n=e.className,a=e.children,r=e.flex,s=e.row,c=e.align,i=e.column,o=Object(O.a)(e,v),l=b()("",(t={},Object(m.a)(t,"wrapper_flex",r),Object(m.a)(t,"wrapper_flex_column",i),Object(m.a)(t,"wrapper_flex_row",s),Object(m.a)(t,"wrapper_flex_align_".concat(c),c),Object(m.a)(t,"".concat(n),n),t));return Object(h.jsx)("div",Object(g.a)(Object(g.a)({className:l},o),{},{children:a}))};!function(e){e.h1="h1",e.h2="h2",e.h3="h3",e.h4="h4",e.p1="p1",e.p2="p2",e.p3="p3",e.span="span"}(r||(r={}));var _,N,E=(a={},Object(m.a)(a,r.h1,"h1"),Object(m.a)(a,r.h2,"h2"),Object(m.a)(a,r.h3,"h3"),Object(m.a)(a,r.h4,"h4"),Object(m.a)(a,r.p1,"p"),Object(m.a)(a,r.p2,"p"),Object(m.a)(a,r.p3,"p"),Object(m.a)(a,r.span,"span"),a),S=(n(95),["variant","children","color","className"]),w=function(e){var t,n=e.variant,a=e.children,r=e.color,s=e.className,c=Object(O.a)(e,S),i=E[n];return Object(h.jsx)(i,Object(g.a)(Object(g.a)({className:b()("typography",(t={},Object(m.a)(t,"typography_variant_".concat(n),n),Object(m.a)(t,"typography_color_".concat(r),r),Object(m.a)(t,"".concat(s),s),t))},c),{},{children:a}))},y=(n(96),function(e){var t,n=e.isCurrentUserMessage,a=e.messageText,s=b()("message",(t={},Object(m.a)(t,"message_side_left",!n),Object(m.a)(t,"message_side_right",n),t));return Object(h.jsx)(x,{className:s,children:Object(h.jsx)(w,{variant:r.p1,children:a})})}),I=(n(97),function(e){var t=e.currentUsername,n=e.dialogMessages;return Object(h.jsx)(h.Fragment,{children:(null===n||void 0===n?void 0:n.length)?Object(h.jsx)(x,{className:"messages-area",children:n.map((function(e){return Object(h.jsx)(y,{messageText:e.text,isCurrentUserMessage:e.fromUser===t},e.createdAt)}))}):"\u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u043d\u0435\u0442"})}),k=n(3),L=n.n(k),C=n(11),D=["name"],A=function(e){var t=e.name,a=Object(O.a)(e,D),r=c.a.useRef(),i=Object(s.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1];if(c.a.useEffect((function(){u(!0);var e=function(){var e=Object(C.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(99)("./".concat(t,".svg"));case 3:r.current=e.sent.default,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.t0;case 10:return e.prev=10,u(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,6,10,13]])})));return function(){return e.apply(this,arguments)}}();return e(),function(){u(!1)}}),[t]),!l&&r.current){var d=r.current;return Object(h.jsx)(d,Object(g.a)({},a))}return null};!function(e){e.inputError="inputError",e.sendMessage="sendMessage",e.addFile="addFile",e.logo="logo",e.maleAvatar="maleAvatar",e.femaleAvatar="femaleAvatar",e.noUserAvatar="noUserAvatar",e.userIcon="userIcon",e.userList="userList",e.arrowLeft="arrowLeft",e.closeIcon="closeIcon",e.spiner="spiner",e.spinnerCircle="spinnerCircle",e.updateIcon="updateIcon",e.arrowDown="arrowDown",e.deleteIcon="deleteIcon",e.closeCircleIcon="closeCircleIcon"}(_||(_={})),function(e){e.error="tomato",e.primary="cornflowerblue",e.grey="lightgray",e.darkGrey="darkgrey",e.mediumBlue="mediumBlue"}(N||(N={}));n(100);var U,T,R,P=function(e){var t,n=e.size,a=e.className,r=b()("logo",(t={},Object(m.a)(t,"logo_size_".concat(n),n),Object(m.a)(t,"".concat(a),a),t));return Object(h.jsx)(x,{className:r,children:Object(h.jsx)(A,{name:_.logo})})};!function(e){e.button="button",e.reset="reset",e.submit="submit"}(U||(U={})),function(e){e.large="large",e.medium="medium",e.small="small"}(T||(T={})),function(e){e.primary="primary",e.outline="outline",e.notification="notification",e.icon="icon"}(R||(R={}));n(101);var M,F,G,V=function(e){var t=e.iconName,n=e.type,a=e.color,r=e.isDisabled,s=e.className,c=e.onClick;return Object(h.jsx)(p,{type:n,size:T.small,isDisabled:r,onClick:c,className:s,variant:R.icon,children:Object(h.jsx)(A,{name:t,color:a,className:"button__icon"})})};!function(e){e.large="large",e.medium="medium"}(M||(M={})),function(e){e.SCREEN_HOME="/",e.SCREEN_LOGIN="/login",e.SCREEN_SIGN_UP="/signup",e.SCREEN_CURRENT_DIALOG="/dialogs/:id",e.SCREEN_DIALOGS="/dialogs"}(F||(F={})),function(e){e.auth="auth",e.chat="chat"}(G||(G={}));n(102);var z,q,J,B=c.a.memo((function(e){var t,n=e.isLoginPage,a=e.isChatPage,s=b()("header",(t={},Object(m.a)(t,"auth-page__header",n),Object(m.a)(t,"chat-page__header",a),t));return Object(h.jsxs)("header",{className:s,children:[a?Object(h.jsx)(l.b,{to:a?F.SCREEN_DIALOGS:F.SCREEN_LOGIN,children:Object(h.jsx)(P,{size:M.large,className:"header__logo"})}):Object(h.jsx)(P,{size:M.large,className:"header__logo"}),n?Object(h.jsxs)(w,{variant:r.h1,className:"header__text",children:["Wellcome to",Object(h.jsxs)(w,{variant:r.span,color:N.primary,children:[" ","Chatty"]}),Object(h.jsx)(w,{variant:r.span,color:N.mediumBlue,children:"!"})]}):Object(h.jsx)(V,{className:"header__button",type:U.button,color:N.primary,iconName:_.userIcon})]})})),Y=n(12),K=n(30),W=n(16),Z=(n(201),function(e){var t,n=e.htmlFor,a=e.labelText,r=e.errorText,s=e.children,c=e.className,i=b()("label",(t={},Object(m.a)(t,"".concat(c),c),Object(m.a)(t,"label_notification_error",r),t));return Object(h.jsxs)("label",{htmlFor:n,className:i,children:[r||a,s]})});!function(e){e.text="text",e.email="email",e.password="password",e.file="file",e.textarea="textarea",e.select="select"}(z||(z={})),function(e){e.login="login",e.password="password",e.passwordConfirm="passwordConfirm",e.nickname="nickname",e.captcha="captcha",e.gender="gender",e.files="files",e.messageText="messageText"}(q||(q={})),function(e){e.large="large",e.medium="medium"}(J||(J={}));n(202);var H,Q=function(e){var t=e.id,n=e.field,a=e.uniqueKey,r=e.errorText,s=e.className,c=e.handleFileInputChange,i=b()("file-input",Object(m.a)({},"".concat(s),s));return Object(h.jsxs)(x,{className:i,children:[Object(h.jsxs)(Z,{htmlFor:q.files,className:"file-input__label",children:[Object(h.jsx)(A,{name:_.addFile,className:"file-input__icon"}),Object(h.jsx)("input",Object(g.a)(Object(g.a)({type:z.file,id:t},n),{},{value:n.value.filename,onChange:function(e){c(e,n.onChange)}}),a)]}),Object(h.jsx)(Z,{errorText:r,className:"file-input__label_error"})]})},X=(n(203),function(e){var t,n=e.type,a=e.placeholder,r=void 0===a?"":a,s=e.labelText,c=e.errorText,i=e.className,o=e.isRequired,l=e.isDisabled,u=e.size,d=e.field,f=e.isAvailableAutoComplete,j=void 0===f||f,p=b()("form-field",(t={},Object(m.a)(t,"".concat(i),i),Object(m.a)(t,"form-field_size_".concat(u),u),t)),O=b()("form-field__input",Object(m.a)({},"form-field__input_notification_error",c));return Object(h.jsxs)(x,{className:p,children:[Object(h.jsx)(Z,{htmlFor:d.name,labelText:s,className:"form-field__label"}),Object(h.jsxs)(x,{className:"form-field__inner",children:[n===z.textarea?Object(h.jsx)("textarea",Object(g.a)({required:o,className:"form-field__textarea",placeholder:r,id:d.name},d)):Object(h.jsx)("input",Object(g.a)({autoComplete:j?"on":"off",className:O,id:d.name,placeholder:r,type:n,disabled:l},d)),c&&Object(h.jsx)(A,{className:"form-field__icon",color:N.error,name:_.inputError})]}),c&&Object(h.jsx)(Z,{htmlFor:d.name,errorText:c,className:"form-field__label_notification_error"})]})}),$=n(5),ee=n(6),te=n(8);!function(e){e.usersList="users_list",e.userData="user_data",e.sendMessage="send_message",e.sendUserJoinedInfo="user_joined"}(H||(H={}));var ne,ae="http://109.194.37.212",re="".concat(ae,":").concat("93","/api"),se="".concat("ws://109.194.37.212",":").concat("2346"),ce=function(e){e(H.usersList)},ie=function(e){e(H.userData)},oe=function(e,t){e(H.sendMessage,{message:t})},le=function(e,t,n){e(H.sendUserJoinedInfo,{name:t,gender:n})};!function(e){e.LOADED="LOADED",e.ERROR="ERROR",e.NEVER="NEVER",e.PENDING="PENDING"}(ne||(ne={}));var ue,de,fe=function(){function e(t){Object($.a)(this,e),this.rootStore=void 0,this.genderList=[],this.genderListFetchError="",this.loadingState=ne.NEVER,this.rootStore=t,Object(te.d)(this)}return Object(ee.a)(e,[{key:"setGenderList",value:function(e){this.genderListFetchError="",this.genderList=e}},{key:"setError",value:function(e){this.genderListFetchError=e}},{key:"fetchGenderList",value:L.a.mark((function e(){var t=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.genderList=[],this.loadingState=ne.PENDING,e.prev=2,e.next=5,fetch("".concat(re,"/auth"),{method:"GET"}).then((function(e){200===e.status?e.json().then((function(e){Object(te.g)((function(){t.setGenderList(e.genders)}))})):e.text().then((function(e){Object(te.g)((function(){t.setError(e)}))}))}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),Object(te.g)((function(){t.setError(e.t0.message)}));case 10:return e.prev=10,this.loadingState=ne.LOADED,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[2,7,10,13]])}))}]),e}();!function(e){e.male="male",e.female="female",e.noGender="noGender"}(ue||(ue={})),function(e){e.large="large",e.medium="medium",e.small="small"}(de||(de={}));var me,je=function(){function e(t){Object($.a)(this,e),this.rootStore=void 0,this.dialogsList=[],this.currentDialogInfo={companion:{username:"",gender:ue.noGender,lastSeen:""}},this.currentDialogId="",this.currentDialogError="",this.loadingState=ne.NEVER,this.rootStore=t,Object(te.d)(this)}return Object(ee.a)(e,[{key:"getDialogInfo",value:function(){var e=this;return this.dialogsList.find((function(t){return t.dialogId===e.currentDialogId}))}},{key:"addDialogToDialogList",value:function(){if(!this.getDialogInfo()){var e={dialogId:this.currentDialogId,dialogMessages:[]};this.dialogsList.push(e)}}},{key:"setCurrentDialogInfo",value:function(e,t,n,a){var r=this;Object(te.g)((function(){r.currentDialogInfo.companion={username:e,lastSeen:t,gender:a},r.currentDialogId=n,r.addDialogToDialogList()}))}},{key:"updateCurrentDialogMessages",value:function(e){var t=this.getDialogInfo();Object(te.g)((function(){null===t||void 0===t||t.dialogMessages.push(e)}))}},{key:"setError",value:function(e){this.currentDialogError=e}},{key:"clearError",value:function(){this.currentDialogError=""}},{key:"sendMessageFile",value:function(){var e=Object(C.a)(L.a.mark((function e(t,n){var a=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingState=ne.PENDING,e.prev=1,e.next=4,fetch("".concat(re).concat(n),{method:"POST",body:t}).then((function(e){if(200===e.status)return a.currentDialogError&&Object(te.g)((function(){a.clearError()})),e.text();e.text().then((function(e){Object(te.g)((function(){console.log("error",e),a.setError(e)}))}))}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),Object(te.g)((function(){var t=e.t0.message;a.setError("Failed to fetch"===t?"\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0435 \u0444\u0430\u0439\u043b\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430...":t)}));case 10:return e.prev=10,Object(te.g)((function(){a.loadingState=ne.LOADED})),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),be=function(){function e(t){Object($.a)(this,e),this.rootStore=void 0,this.userList=[],this.loadingState=ne.NEVER,this.rootStore=t,Object(te.d)(this)}return Object(ee.a)(e,[{key:"setUserList",value:function(e){var t=this,n=this.rootStore.userStore.userInfo.username,a=e.filter((function(e){return e.name!==n}));Object(te.g)((function(){t.userList=a,t.loadingState=ne.LOADED}))}},{key:"updateUserList",value:function(e){var t=this,n=this.rootStore.userStore.userInfo.username;Object(te.g)((function(){n===e.name||t.userList.find((function(t){return t.name===e.name}))||t.userList.push(e)}))}}]),e}(),he=new(function(){function e(){Object($.a)(this,e),this.accessToken="accessToken"}return Object(ee.a)(e,[{key:"clearLocalStorage",value:function(){localStorage.removeItem(this.accessToken)}},{key:"getAccessToken",value:function(){return localStorage.getItem(this.accessToken)}},{key:"setAccessToken",value:function(e){return localStorage.setItem(this.accessToken,e)}}]),e}()),pe=he.getAccessToken(),ge=function(){function e(t){Object($.a)(this,e),this.rootStore=void 0,this.userInfo={username:"",gender:"",isUserAuthenticate:!!pe},this.tokens={accessToken:pe||""},this.loadingState=ne.NEVER,this.userAuthDataError="",Object(te.d)(this),this.rootStore=t}return Object(ee.a)(e,[{key:"setCurrentUserInfo",value:function(e){var t=e.name,n=e.gender;this.userInfo={username:t,gender:n,isUserAuthenticate:!0}}},{key:"setAccessToken",value:function(e){this.tokens={accessToken:e},this.userInfo.isUserAuthenticate=!0,he.setAccessToken(e)}},{key:"clearUserInfo",value:function(){he.clearLocalStorage(),this.userInfo={username:"",gender:"",isUserAuthenticate:!1}}},{key:"setError",value:function(e){this.userAuthDataError=e}},{key:"clearError",value:function(){this.userAuthDataError=""}},{key:"setLoadingState",value:function(e){this.loadingState=e}},{key:"sendUserAuthData",value:function(){var e=Object(C.a)(L.a.mark((function e(t,n){var a=this;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingState=ne.PENDING,e.prev=1,e.next=4,fetch("".concat(re).concat(n),{method:"POST",body:t}).then((function(e){if(200===e.status)return a.userAuthDataError&&Object(te.g)((function(){a.clearError()})),e.json();e.text().then((function(e){Object(te.g)((function(){a.setError(e)}))}))}));case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(1),Object(te.g)((function(){a.setError(e.t0.message)}));case 10:return e.prev=10,this.loadingState=ne.LOADED,e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Oe=Object(s.createContext)(new function e(){Object($.a)(this,e),this.userStore=new ge(this),this.userListStore=new be(this),this.dialogStore=new je(this),this.genderListStore=new fe(this),this.userStore=new ge(this),this.genderListStore=new fe(this),this.dialogStore=new je(this)}),ve={VIDEO:["video/mp4","video/ogg","video/webm"],AUDIO:["audio/mpeg","audio/ogg"],IMAGE:["image/jpg","image/jpeg","image/gif","image/png","image/svg+xml"]},xe=(n(204),function(e){var t=e.previewFileState,n=e.handleDeletePreviewFile,a=t.isVisiblePreviewFile,r=t.fileInfo,s=t.handleSetIsVisiblePreview;return Object(h.jsx)(x,{className:b()("preview",{preview_active:a}),children:Object(h.jsxs)(x,{className:"preview__wrapper",flex:!0,children:[ve.VIDEO.includes(r.type)&&Object(h.jsx)(x,{className:"preview__video",children:Object(h.jsx)("video",{controls:!0,children:Object(h.jsx)("source",{src:r.src,type:r.type})})}),ve.IMAGE.includes(r.type)&&Object(h.jsx)(x,{className:"preview__image",children:Object(h.jsx)("img",{src:r.src})}),ve.AUDIO.includes(r.type)&&Object(h.jsx)(x,{className:"preview__audio",children:Object(h.jsx)("audio",{controls:!0,children:Object(h.jsx)("source",{src:r.src,type:r.type})})}),Object(h.jsxs)(x,{className:"preview__buttons",children:[Object(h.jsx)(V,{className:"preview__button",type:U.button,iconName:_.closeCircleIcon,color:N.primary,onClick:s}),Object(h.jsx)(V,{className:"preview__button",type:U.button,iconName:_.deleteIcon,color:N.error,onClick:n})]})]})})}),_e={src:"",type:"",size:0,name:""},Ne=n(9),Ee=function(e){var t=e.size>=2097152,n=![].concat(Object(Ne.a)(ve.VIDEO),Object(Ne.a)(ve.AUDIO),Object(Ne.a)(ve.IMAGE)).includes(e.type);return{isValid:!t&&!n,isTypeError:n,isSizeError:t}},Se=(n(205),W.a().shape({messageText:W.c()})),we=function(e){var t,n=e.WSAction,a=Object(s.useContext)(Oe),c=a.dialogStore,i=a.userStore,o=function(){var e=Object(s.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(_e),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(s.useState)(!1),u=Object(f.a)(l,2),d=u[0],m=u[1],j=Object(s.useState)(Date.now()),b=Object(f.a)(j,2),h=b[0],p=b[1],g=Object(s.useCallback)((function(e){var t=new FileReader;m(!1),t.onload=function(){o({src:t.result,type:e.type,size:e.size,name:e.name}),a(!0),m(!0)},t.readAsDataURL(e)}),[]),O=Object(s.useCallback)((function(){m(!d)}),[d]),v=Object(s.useCallback)((function(){o(_e),m(!1)}),[]),x=Object(s.useCallback)((function(){p(Date.now())}),[]);return[{fileInfo:i,isLoaded:n,isVisiblePreviewFile:d,uniqueKeyInput:h,setFileInfo:o,handleSetIsVisiblePreview:O,handleDeleteFile:v,handleResetUniqueKey:x},g]}(),l=Object(f.a)(o,2),u=l[0],d=l[1],m=c.loadingState===ne.PENDING,j=Object(s.useRef)({text:"",fromUser:"",forUser:"",fileLink:"",createdAt:null}),p=Object(Y.e)({mode:"onChange",resolver:Object(K.a)(Se),defaultValues:{messageText:"",files:[]}}),g=p.handleSubmit,O=p.control,v=p.reset,E=p.clearErrors,S=p.setError,y=p.formState,I=y.errors,k=y.isValid,D=y.isSubmitSuccessful,A=(null===(t=I.files)||void 0===t?void 0:t.message)||c.currentDialogError,T=Object(s.useCallback)((function(){u.handleDeleteFile(),u.handleResetUniqueKey(),v({files:[]})}),[u,v]),R=function(){var e=Object(C.a)(L.a.mark((function e(t){var a,r,s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new FormData,j.current={text:t.messageText,fromUser:i.userInfo.username,forUser:c.currentDialogInfo.companion.username,createdAt:Date.now()},!(null===(a=t.files)||void 0===a?void 0:a.name)){e.next=8;break}return r.append("0",t.files,t.files.name),e.next=6,c.sendMessageFile(r,"/upload");case 6:s=e.sent,j.current.fileLink=s?"".concat(ae,":").concat("93").concat(s):"";case 8:(j.current.text||j.current.fileLink)&&n.sendMessage("'".concat(JSON.stringify(j.current),"'"));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=Object(s.useCallback)((function(e,t){var n;if(null===(n=e.target.files)||void 0===n?void 0:n.length){var a=e.target.files[0];Ee(a).isValid&&(d(a),t(a)),Ee(a).isSizeError&&S("files",{type:"fileError",message:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0444\u0430\u0439\u043b\u0430 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 2 \u043c\u0431"}),Ee(a).isTypeError&&S("files",{type:"fileError",message:"\u0414\u0430\u043d\u043d\u044b\u0439 \u0442\u0438\u043f \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442\u0441\u044f"})}}),[d,S]);return Object(s.useEffect)((function(){D&&(T(),v({files:[],messageText:""}),j.current={text:"",fromUser:"",forUser:"",createdAt:null})}),[D,u,T,v]),Object(s.useEffect)((function(){A&&setTimeout((function(){E("files"),c.clearError(),u.handleResetUniqueKey()}),1e3)}),[E,u,A,c]),Object(h.jsxs)("form",{className:"message-form",onSubmit:g(R),children:[Object(h.jsx)(x,{className:"message-form__preview-block",children:Object(h.jsx)(xe,{previewFileState:u,handleDeletePreviewFile:T})}),u.fileInfo.name&&Object(h.jsx)(V,{className:b()("message-form__preview-button",{"message-form__preview-button_active":!u.isVisiblePreviewFile}),iconName:_.arrowDown,type:U.button,onClick:u.handleSetIsVisiblePreview}),Object(h.jsxs)(x,{flex:!0,align:"center",className:"message-form__inner",children:[Object(h.jsx)(Y.a,{name:q.files,control:O,render:function(e){var t=e.field;return Object(h.jsx)(Q,{id:q.files,className:"message-form__file-input",field:t,handleFileInputChange:P,uniqueKey:u.uniqueKeyInput,errorText:A})}}),Object(h.jsx)(Y.a,{name:q.messageText,control:O,render:function(e){var t=e.field;return Object(h.jsx)(X,{placeholder:"Write something...",type:z.textarea,field:t})}}),Object(h.jsx)(w,{variant:r.span,className:b()("message-form__tooltip",{"message-form__tooltip_active":m}),children:"\u0418\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0444\u0430\u0439\u043b\u0430..."}),Object(h.jsx)(V,{iconName:m?_.spinnerCircle:_.sendMessage,type:U.submit,color:N.primary,className:"message-form__button",isDisabled:!k||m})]})]})},ye=function(e){return e===ue.male?_.maleAvatar:e===ue.female?_.femaleAvatar:_.noUserAvatar},Ie=(n(206),function(e){var t,n=e.size,a=e.gender,r=e.className,s=b()("avatar",(t={},Object(m.a)(t,"avatar_size_".concat(n),n),Object(m.a)(t,"".concat(r),r),t));return Object(h.jsx)(A,{className:s,name:ye(a)})}),ke=(n(207),function(e){var t=e.username,n=e.userStatus,a=e.gender,s=e.className,c=b()("user-status",Object(m.a)({},"".concat(s),s));return Object(h.jsxs)(x,{flex:!0,row:!0,className:c,children:[Object(h.jsx)(Ie,{size:de.small,gender:a,className:"user-status__avatar"}),Object(h.jsxs)(x,{flex:!0,column:!0,children:[Object(h.jsx)(w,{variant:r.h3,className:"user-status__username",children:t}),Object(h.jsx)(w,{variant:r.p1,className:"user-status__last-seen",children:n})]})]})}),Le=(n(208),function(e){var t=e.isVisibleUserList,n=e.dialogInfo,a=e.handleVisibleUserList;return Object(h.jsxs)(x,{flex:!0,align:"center",className:"status-bar",children:[Object(h.jsx)(V,{iconName:t?_.closeIcon:_.userList,type:U.button,color:N.primary,onClick:a,className:b()("status-bar__user-list-icon",Object(m.a)({},"status-bar__user-list-icon_transform",t))}),Object(h.jsx)(V,{iconName:_.arrowLeft,type:U.button,color:N.primary,onClick:function(){return history.back()},className:"status-bar__back-icon"}),Object(h.jsx)(ke,{className:"status-bar__user-status",username:n.username,userStatus:n.lastSeen,gender:n.gender})]})}),Ce=(n(209),c.a.memo((function(e){var t=e.name,n=e.gender,a=e.id,s=e.isCurrentUserLastMessage,c=e.lastMessage,i=e.setDialogInfo;return Object(h.jsxs)(l.b,{to:"".concat(F.SCREEN_DIALOGS,"/").concat(a),className:"user-list__link",activeClassName:"user-list__link_active",onClick:function(){return i(t,"Last seen 3 seconds ago",a,n)},children:[Object(h.jsx)(Ie,{size:de.medium,gender:n,className:"link__avatar"}),Object(h.jsxs)(x,{className:"link__info",children:[Object(h.jsx)(w,{variant:r.h4,className:"link__username",children:t}),Object(h.jsxs)(w,{variant:r.p2,className:"link__last-message",children:[s&&Object(h.jsxs)(w,{variant:r.span,color:N.primary,children:["You:"," "]}),c,"Last message from user"]})]})]})}))),De=(n(210),function(e){var t=e.className,n=b()("no-user-block",Object(m.a)({},"".concat(t),t));return Object(h.jsxs)("div",{className:n,children:[Object(h.jsx)(Ie,{size:de.large,gender:ue.noGender}),Object(h.jsx)(w,{variant:r.p2,className:"no-user-block__text",children:"There is no other users yet"})]})}),Ae=(n(211),function(e){var t=e.className,n=b()("spinner",Object(m.a)({},"".concat(t),t));return Object(h.jsx)(x,{className:n,children:Object(h.jsx)(A,{name:_.spiner,className:"spinner__icon"})})}),Ue=(n(212),function(e){var t=e.isVisibleUserList,n=e.listRef,a=e.users,r=e.isLoaded,s=e.setDialogInfo,c=e.handleVisibleUserList,i=b()("user-list",Object(m.a)({},"user-list_active",t));return Object(h.jsx)("div",{ref:n,className:i,onClick:c,children:r?a.length?a.map((function(e,t){return Object(h.jsx)(Ce,{setDialogInfo:s,id:"".concat(e.name,"_").concat(t),name:e.name,gender:e.gender,lastMessage:e.lastMessage,isCurrentUserLastMessage:e.isCurrentUserLastMessage},"".concat(e.name,"_").concat(t))})):Object(h.jsx)(De,{className:"user-list__no-user-block"}):Object(h.jsx)(Ae,{className:"user-list__spinner"})})}),Te=(n(213),function(e){var t=e.children,n=e.page,a=b()("main-container",Object(m.a)({},"".concat(n,"-page__main-container"),n));return Object(h.jsx)("main",{className:a,children:t})});!function(e){e[e.SIZE_MOBILE_L=425]="SIZE_MOBILE_L"}(me||(me={}));n(214);var Re,Pe=function(e){var t=e.header,n=e.userList,a=e.statusBar,r=e.dialog,c=e.messageForm,i=e.notificationButton,o=e.errorModal,l=function(){var e=Object(s.useState)({width:0}),t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){function e(){a({width:window.innerWidth})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n}(),d=Object(u.h)("".concat(F.SCREEN_CURRENT_DIALOG)),m=Object(u.h)("".concat(F.SCREEN_DIALOGS));return Object(h.jsxs)(Te,{page:G.chat,children:[o,(l.width>me.SIZE_MOBILE_L||(null===m||void 0===m?void 0:m.isExact))&&t,Object(h.jsxs)("main",{className:"chat-page__inner",children:[(l.width>me.SIZE_MOBILE_L||(null===m||void 0===m?void 0:m.isExact))&&n,Object(h.jsx)(x,{className:"chat-page__dialog",children:d?Object(h.jsxs)(h.Fragment,{children:[a,r,c]}):i})]})]})},Me=["type"],Fe=(n(215),function(e){var t=e.notificationText,n=(e.isError,Object(s.useContext)(Oe).userStore);return Object(h.jsx)(x,{className:"modal",children:Object(h.jsxs)(x,{className:"modal__wrapper",children:[Object(h.jsx)(w,{variant:r.h3,className:"modal__header-text",children:"\u041f\u043e\u0445\u043e\u0436\u0435 \u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a..."}),Object(h.jsxs)(w,{variant:r.p1,className:"modal__info-text",children:["\u041f\u043e\u043f\u044b\u0442\u043a\u0430 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u044f \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0430\u0441\u044c \u043d\u0435\u0443\u0434\u0430\u0447\u043d\u043e, \u0442\u0435\u043a\u0441\u0442 \u043e\u0448\u0438\u0431\u043a\u0438 :",Object(h.jsx)(w,{variant:r.span,className:"modal__error-text",children:"error"===t?"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0441\u0435\u0442\u0438":t})]}),Object(h.jsx)(w,{variant:r.p1,className:"modal__info-text",children:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0435\u0440\u043d\u0438\u0442\u0435\u0441\u044c \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438 \u0438 \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u043e\u0439\u0442\u0438 \u0441\u043d\u043e\u0432\u0430."}),Object(h.jsx)(p,{type:U.button,variant:R.notification,className:"modal__button",onClick:function(){n.clearUserInfo()},children:"\u041d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"})]})})}),Ge=Object(d.a)((function(){var e=Object(s.useState)(!1),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(s.useContext)(Oe),i=r.userListStore,o=r.dialogStore,l=r.userStore,u=l.userInfo.username,d=l.userInfo.gender,m=o.getDialogInfo(),j=function(e){var t=Object(s.useContext)(Oe),n=t.userStore,a=t.userListStore,r=t.dialogStore,c=Object(s.useRef)(),i=Object(s.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],d=Object(s.useState)(""),m=Object(f.a)(d,2),j=m[0],b=m[1],h=Object(s.useState)(),p=Object(f.a)(h,2),v=p[0],x=p[1],_=Object(s.useState)(!1),N=Object(f.a)(_,2),E=N[0],S=N[1],w=n.tokens.accessToken,y="/?type=".concat(e,"&ws_id=");Object(s.useEffect)((function(){return w&&(c.current=new WebSocket("".concat(se).concat(y).concat(w))),function(){var e;null===(e=c.current)||void 0===e||e.close(),S(!0)}}),[w,y]),Object(s.useEffect)((function(){c.current&&(c.current.onopen=function(){u(!0)},c.current.onerror=function(e){b(e.type),console.log(e)},c.current.onclose=function(){setTimeout((function(){var e;null===(e=c.current)||void 0===e||e.close()}),1e3),S(!0)},c.current&&(c.current.onmessage=function(e){if(e.data.includes("Get param 'ws_id' - is wrong! Please relogin!"))return b(e.data);var t=e.data.replaceAll("'",""),s=JSON.parse(t),c=s.type,i=Object(O.a)(s,Me);c===H.sendMessage&&r.updateCurrentDialogMessages(JSON.parse(i.data.message)),c===H.usersList&&a.setUserList(i.data),c===H.userData&&n.setCurrentUserInfo(i.data),c===H.sendUserJoinedInfo&&a.updateUserList(i.data),x(i.data)}))}),[a,n,r]);var I=function(e,t){var n,a,r;return e===H.sendMessage?null===(a=c.current)||void 0===a?void 0:a.send("'".concat(JSON.stringify({type:e,data:t}),"'")):e===H.sendUserJoinedInfo?null===(r=c.current)||void 0===r?void 0:r.send("'".concat(JSON.stringify({type:e,data:t}),"'")):null===(n=c.current)||void 0===n?void 0:n.send(JSON.stringify(Object(g.a)({type:e},t)))};return[{isOpen:l,error:j,result:v,isClosed:E},Object(s.useMemo)((function(){return{fetchUserList:function(){return ce(I)},fetchUserData:function(){return ie(I)},sendMessage:function(e){return oe(I,e)},sendUserJoinedInfo:function(e,t){return le(I,e,t)}}}),[])]}("test"),b=Object(f.a)(j,2),v=b[0],x=b[1],_=Object(s.useRef)(null),N=c.a.useCallback((function(){a(!n)}),[n]),E=c.a.useCallback((function(e,t,n,a){o.setCurrentDialogInfo(e,t,n,a)}),[o]);return Object(s.useEffect)((function(){v.isOpen&&(x.fetchUserData(),x.fetchUserList())}),[x,v.isOpen]),Object(s.useEffect)((function(){v.isOpen&&u&&x.sendUserJoinedInfo(u,d)}),[x,v.isOpen,u,d]),Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(Pe,{errorModal:v.error?Object(h.jsx)(Fe,{isError:!0,notificationText:v.error}):void 0,header:Object(h.jsx)(B,{isChatPage:!0}),userList:Object(h.jsx)(Ue,{setDialogInfo:E,users:i.userList,isLoaded:i.loadingState===ne.LOADED,listRef:_,handleVisibleUserList:N,isVisibleUserList:n}),statusBar:Object(h.jsx)(Le,{isVisibleUserList:n,handleVisibleUserList:N,dialogInfo:o.currentDialogInfo.companion}),dialog:Object(h.jsx)(I,{dialogMessages:null===m||void 0===m?void 0:m.dialogMessages,currentUsername:l.userInfo.username}),messageForm:o.currentDialogId?Object(h.jsx)(we,{WSAction:x}):Object(h.jsx)("span",{children:"dsf"}),notificationButton:Object(h.jsx)(p,{variant:R.notification,type:U.button,className:"chat-page__button_notification",onClick:N,children:"Select a chat to start messaging"})})})})),Ve={fetchCaptcha:function(){var e=Object(C.a)(L.a.mark((function e(t,n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),t(""),e.prev=2,e.next=5,fetch("".concat(re,"/auth/captcha?t=").concat(Date.now())).then((function(e){200===e.status&&t(e.url)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),t("");case 10:return e.prev=10,n(!0),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}()},ze=(n(216),c.a.memo((function(){var e=Object(s.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],r=Object(s.useState)(!1),c=Object(f.a)(r,2),i=c[0],o=c[1],l=Object(s.useCallback)((function(){Ve.fetchCaptcha(a,o)}),[]);return Object(s.useEffect)((function(){l()}),[l]),Object(h.jsxs)(x,{flex:!0,align:"center",className:"captcha-block",children:[i?n?Object(h.jsx)("img",{src:"".concat(n),alt:"captcha"}):Object(h.jsx)("span",{children:"Failed to fetch captcha"}):Object(h.jsx)(Ae,{className:"captcha-block__spinner"}),Object(h.jsx)(V,{className:"captcha-block__button",iconName:_.updateIcon,color:N.primary,type:U.button,onClick:l})]})})));!function(e){e.login="login",e.password="password",e.passwordConfirm="password_confirm",e.nickname="name",e.gender="gender_id",e.captcha="captcha"}(Re||(Re={}));var qe=function(e){var t=new FormData;return t.append(Re.login,e.login),t.append(Re.password,e.password),t.append(Re.captcha,e.captcha),e.passwordConfirm&&t.append(Re.passwordConfirm,e.passwordConfirm),e.nickname&&t.append(Re.nickname,e.nickname),e.gender&&t.append(Re.gender,e.gender),t},Je=function(e,t){for(var n in Re)e.match(Re.gender)&&t("gender",{message:"Something wrong with this field"}),e.match(Re.password)&&t("passwordConfirm",{message:"Something wrong with this field"}),e.match(Re.nickname)&&t("nickname",{message:"Your name must be less than 50 letters"}),e.match(n)&&t(n,{message:e})},Be=(n(217),W.a().shape({login:W.c().min(2,"Your name must contain at least 2 letters").max(25,"Your name must be less than 50 letters").required("Please input your name"),password:W.c().required("Please input your password"),captcha:W.c().min(5,"Min 5 symbols").max(5,"Max 5 symbols").required("Please input captcha")})),Ye=Object(d.a)((function(){var e=c.a.useContext(Oe).userStore,t=Object(Y.e)({mode:"onChange",resolver:Object(K.a)(Be),defaultValues:{login:"",password:"",captcha:""}}),n=t.handleSubmit,a=t.control,i=t.setError,o=t.formState,l=o.errors,u=o.isValid,d=o.isSubmitSuccessful,f=function(){var t=Object(C.a)(L.a.mark((function t(n){var a;return L.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sendUserAuthData(qe(n),"/auth/login");case 2:(a=t.sent)&&e.setAccessToken(a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){e.userAuthDataError&&d&&Je(e.userAuthDataError,i)}),[i,e,d,e.userAuthDataError]),Object(h.jsxs)(x,{className:"form-login",children:[Object(h.jsx)(w,{className:"form-login__text",variant:r.h2,children:"Please, autorize yourself"}),Object(h.jsxs)("form",{onSubmit:n(f),children:[Object(h.jsx)(Y.a,{name:q.login,control:a,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"User name",type:z.text,labelText:"User name",className:"form-login__input",field:n,errorText:null===(t=l.login)||void 0===t?void 0:t.message})}}),Object(h.jsx)(Y.a,{name:q.password,control:a,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Input password",type:z.password,labelText:"Password",className:"form-login__input",field:n,errorText:null===(t=l.password)||void 0===t?void 0:t.message})}}),Object(h.jsxs)(x,{flex:!0,className:"form-login__security-code",children:[Object(h.jsx)(Y.a,{name:q.captcha,control:a,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Security code",type:z.text,labelText:"Security code",className:"form-login__input",field:n,size:J.medium,errorText:null===(t=l.captcha)||void 0===t?void 0:t.message})}}),Object(h.jsx)(ze,{})]}),Object(h.jsxs)(x,{flex:!0,className:"form-login__buttons",children:[Object(h.jsx)(p,{className:"form-login__button",variant:R.primary,size:T.medium,type:U.submit,isDisabled:!u,children:"Log in"}),Object(h.jsx)(p,{className:"form-login__button",variant:R.outline,size:T.medium,type:U.button,isNavLink:!0,path:F.SCREEN_SIGN_UP,children:"Registration"})]})]})]})})),Ke=(n(218),function(e){var t=e.labelText,n=e.error,a=e.className,c=e.options,i=e.setValue,o=e.clearErrors,l=Object(s.useState)(!1),u=Object(f.a)(l,2),d=u[0],j=u[1],p=Object(s.useState)(""),g=Object(f.a)(p,2),O=g[0],v=g[1],E=b()("select__list",{" select__list_active":d});return Object(h.jsxs)(x,{className:"form-field",children:[Object(h.jsx)(Z,{labelText:t,className:"form-field__label"}),Object(h.jsxs)(x,{className:b()("select",Object(m.a)({" select_notification_error":n},"".concat(a),a)),onClick:function(){return j(!d)},children:[Object(h.jsx)(w,{variant:r.p3,className:"select__placeholder",color:O?void 0:N.darkGrey,children:O||"Your gender"}),Object(h.jsx)(A,{className:b()("select__button",{" select__button_active":d}),name:_.arrowDown,color:N.primary}),Object(h.jsx)("ul",{className:E,children:c.map((function(e){return Object(h.jsx)("li",{className:"select__item",onClick:function(){i("gender",e.id,{shouldValidate:!0}),v(e.gender),j(!d),o(["gender"])},children:Object(h.jsx)(w,{variant:r.p3,children:e.gender})},e.id)}))})]}),n&&Object(h.jsx)(Z,{errorText:n,className:"form-field__label_notification_error"})]})}),We=(n(219),W.a().shape({login:W.c().min(2,"Your name must contain at least 2 letters").max(50,"Your name must be less than 50 letters").required("Please input your name"),password:W.c().required("Please input password"),passwordConfirm:W.c().required("Please confirm password").oneOf([W.b("password"),null],"Passwords must match"),nickname:W.c().min(2,"Your name must contain at least 2 letters").max(50,"Your name must be less than 50 letters").required("Please input your name"),gender:W.c().required("Please choose your gender").typeError("Choose your gender"),captcha:W.c().min(5,"Min 5 symbols").max(5,"Max 5 symbols").required("Please input captcha")})),Ze=Object(d.a)((function(){var e,t=Object(u.g)(),n=Object(s.useContext)(Oe),a=n.genderListStore,c=n.userStore,i=Object(s.useCallback)((function(){a.fetchGenderList()}),[a]),o=Object(Y.e)({mode:"onChange",resolver:Object(K.a)(We),defaultValues:{login:"",password:"",passwordConfirm:"",nickname:"",gender:"",captcha:""}}),l=o.handleSubmit,d=o.control,f=o.setValue,m=o.setError,j=o.clearErrors,b=o.formState,g=b.errors,O=b.isValid,v=b.isSubmitSuccessful,N=function(){var e=Object(C.a)(L.a.mark((function e(n){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.sendUserAuthData(qe(n),"/auth/register");case 2:e.sent&&t.push(F.SCREEN_LOGIN);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){c.userAuthDataError&&v&&Je(c.userAuthDataError,m)}),[m,c.userAuthDataError,v]),Object(h.jsxs)(x,{className:"form-sign-up",children:[Object(h.jsx)(w,{className:"form-sign-up__text",variant:r.h2,children:"Registration"}),Object(h.jsxs)("form",{onSubmit:l(N),children:[Object(h.jsx)(Y.a,{name:q.login,control:d,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Input user name",type:z.text,labelText:"Create user name",className:"form-sign-up__input",field:n,size:J.large,errorText:null===(t=g.login)||void 0===t?void 0:t.message})}}),Object(h.jsx)(Y.a,{name:q.password,control:d,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Input password",type:z.text,labelText:"Create password",className:"form-sign-up__input",field:n,size:J.large,errorText:null===(t=g.password)||void 0===t?void 0:t.message})}}),Object(h.jsx)(Y.a,{name:q.passwordConfirm,control:d,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Password confirmation",type:z.text,labelText:"Password confirmation",className:"form-sign-up__input",field:n,size:J.large,isAvailableAutoComplete:!1,errorText:null===(t=g.passwordConfirm)||void 0===t?void 0:t.message})}}),Object(h.jsx)(Y.a,{name:q.nickname,control:d,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Nickname",type:z.text,labelText:"Nickname",className:"form-sign-up__input",field:n,size:J.large,errorText:null===(t=g.nickname)||void 0===t?void 0:t.message})}}),a.loadingState===ne.PENDING?Object(h.jsx)(Ae,{}):a.genderListFetchError?Object(h.jsxs)(x,{flex:!0,align:"center",children:["Failed to fetch gender list. Try again?",Object(h.jsx)(V,{iconName:_.updateIcon,type:U.button,onClick:i})]}):Object(h.jsx)(Ke,{options:a.genderList,labelText:"Your gender",className:"form-sign-up__input",setValue:f,clearErrors:j,error:null===(e=g.gender)||void 0===e?void 0:e.message}),Object(h.jsxs)(x,{flex:!0,className:"form-sign-up__security-code",children:[Object(h.jsx)(Y.a,{name:q.captcha,control:d,render:function(e){var t,n=e.field;return Object(h.jsx)(X,{placeholder:"Security code",type:z.text,labelText:"Security code",className:"form-sign-up__input",field:n,isAvailableAutoComplete:!1,size:J.medium,errorText:null===(t=g.captcha)||void 0===t?void 0:t.message})}}),Object(h.jsx)(ze,{})]}),Object(h.jsxs)(x,{flex:!0,className:"form-sign-up__buttons",children:[Object(h.jsx)(p,{className:"form-sign-up__button",variant:R.primary,size:T.medium,type:U.submit,isDisabled:!O,children:"Register"}),Object(h.jsx)(p,{className:"form-sign-up__button",variant:R.outline,size:T.medium,type:U.button,isNavLink:!0,path:F.SCREEN_LOGIN,children:"Log In"})]})]})]})})),He=(n(220),function(e){var t=e.header,n=e.authForm,a=e.isLoginPage;return Object(h.jsxs)(Te,{page:G.auth,children:[Object(h.jsx)(x,{flex:!0,column:!0,align:"center",className:"auth-page__aside-form",children:Object(h.jsxs)(x,{className:a?"aside-form__login-inner":"aside-form__signup-inner",children:[t,n]})}),Object(h.jsx)(x,{className:"auth-page__aside-image"})]})}),Qe=function(){var e=Object(u.h)("".concat(F.SCREEN_LOGIN)),t=Object(s.useContext)(Oe).genderListStore;return Object(s.useEffect)((function(){t.fetchGenderList()}),[t]),Object(h.jsx)(He,{header:Object(h.jsx)(B,{isLoginPage:!0}),authForm:e?Object(h.jsx)(Ye,{}):Object(h.jsx)(Ze,{}),isLoginPage:e})},Xe=["component","isUserAuthenticate","redirectPath"],$e=function(e){var t=e.component,n=e.isUserAuthenticate,a=e.redirectPath,r=Object(O.a)(e,Xe);return Object(h.jsx)(u.b,Object(g.a)(Object(g.a)({},r),{},{render:function(e){return n?Object(h.jsx)(t,Object(g.a)({},e)):Object(h.jsx)(u.a,{to:a})}}))},et=Object(d.a)((function(){var e=Object(s.useContext)(Oe).userStore.userInfo.isUserAuthenticate;return Object(h.jsx)(l.a,{children:Object(h.jsxs)(u.d,{children:[Object(h.jsx)($e,{component:Ge,exact:!0,path:[F.SCREEN_DIALOGS,F.SCREEN_CURRENT_DIALOG],isUserAuthenticate:e,redirectPath:F.SCREEN_LOGIN}),Object(h.jsx)($e,{component:Qe,exact:!0,path:[F.SCREEN_LOGIN,F.SCREEN_SIGN_UP,F.SCREEN_HOME],isUserAuthenticate:!e,redirectPath:F.SCREEN_DIALOGS}),Object(h.jsx)(u.b,{component:function(){return Object(h.jsx)(h.Fragment,{children:"404: Page not found"})}})]})})}));n(221);o.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(et,{})}),document.getElementById("root"))},88:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){var a={"./addFile.svg":[223,3],"./arrowDown.svg":[224,4],"./arrowLeft.svg":[225,5],"./closeCircleIcon.svg":[226,6],"./closeIcon.svg":[227,7],"./deleteIcon.svg":[228,8],"./femaleAvatar.svg":[229,9],"./inputError.svg":[230,10],"./loginPageFrame.svg":[231,11],"./loginPageFrameMobile.svg":[232,12],"./logo.svg":[233,13],"./maleAvatar.svg":[234,14],"./messageAreaFrame.svg":[235,15],"./noUserAvatar.svg":[236,16],"./sendMessage.svg":[237,17],"./spiner.svg":[238,18],"./spinnerCircle.svg":[239,19],"./updateIcon.svg":[240,20],"./userIcon.svg":[241,21],"./userList.svg":[242,22]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=99,e.exports=r}},[[222,1,2]]]);
//# sourceMappingURL=main.978fd61d.chunk.js.map